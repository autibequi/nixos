# ===================================================================
#                          MONITOR CONFIGURATION
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Monitors/

# Default monitor
monitor = ,highres,auto,1.6

# Generated by nwg-displays on 2025-07-11 at 15:21:12. Do not edit manually.
monitor = DP-2,3840x2160@60.0,2596x1707,1.6
monitor = HDMI-A-1,2560x1600@60.0,996x1851,1.6

# ===================================================================
#                           PROGRAM ALIASES
# ===================================================================
$terminal         = alacritty
$fileManager      = dolphin
$menu             = fuzzel
$lock             = hyprlock
$tesseract        = grim -g "$(slurp)" - | tesseract stdin stdout -l eng | wl-copy
$printScreen      = grim -g "$(slurp)" - | satty -f - --early-exit --fullscreen --copy-command wl-copy
$obsidian         = obsidian
$workBrowser      = chromium
$personalBrowser  = flatpak run app.zen_browser.zen
$workIde          = cursor
$zed              = zeditor
$displayManager   = nwg-displays
$networkManager   = nmtui
$audioManager     = ncpamixer
$workObsidian     = xdg-open "obsidian://open?vault=Work"
$personalObsidian = xdg-open "obsidian://open?vault=books"
$gemini           = chromium --new-window gemini.google.com

env = HYPRCURSOR_THEME,Banana
env = HYPRCURSOR_SIZE,160

# ===================================================================
#                         EXECUTION COMMANDS
# ===================================================================
exec-once = mkdir -p ~/.cache/hyprland
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# --- Waybar ---
exec      = ~/.config/waybar/restart.sh

# --- Wallpaper ---
exec-once = swww-daemon
exec      = swww img ~/.wallpapers/dark.jpg --transition-fps 120 --transition-step 200

# --- Other ---
exec      = hyprshade auto
exec      = hypridle

# ===================================================================
#                          PLUGIN SETTINGS
# ===================================================================
# Load all the plugins you installed
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprexpo.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprspace.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprwinwrap.so"

# Load hyprtasking from local directory (if exists)
exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprtasking.so"

plugin {
    # hyprexpo {
    #     columns           = 3
    #     gap_size          = 10
    #     bg_col            = rgb(111111)
    #     workspace_method  = first 1 # [center/first] [workspace] e.g. first 1 or center m+1

    #     enable_gesture    = true    # laptop touchpad
    #     gesture_fingers   = 3       # 3 or 4
    #     gesture_distance  = 300     # how far is the "max"
    #     gesture_positive  = false   # positive = swipe down. Negative = swipe up.
    # }

    # hyprspace {
    #     workspace_method  = first 1 # [center/first] [workspace] e.g. first 1 or center m+1
    # }

    hyprtasking {
        layout = grid

        gap_size = 20
        bg_color = 0xff26233a
        border_size = 4
        exit_on_hovered = false

        grid:gaps_use_aspect_ratio = true

        gestures {
            enabled = true
            move_fingers = 4
            move_distance = 300
            open_fingers = 3
            open_distance = 300
            open_positive = true
        }

        grid {
            rows = 3
            cols = 3
            loop = false
            gaps_use_aspect_ratio = false
        }

        linear {
            height = 400
            scroll_speed = 1.0
            blur = false
        }
    }
}

# ===================================================================
#                           INPUT SETTINGS
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout    = us
    kb_variant   = altgr-intl
    kb_options   = caps:hyper # your caps is now MOD3, use wisely

    kb_model     =
    kb_rules     =

    follow_mouse     = 1
    accel_profile    = flat
    force_no_accel   = false

    repeat_rate = 25
    repeat_delay = 250

    touchpad {
        natural_scroll         = true
        disable_while_typing   = true
        tap-to-click           = true
        drag_lock              = false
        clickfinger_behavior   = false
    }

    # -1.0 - 1.0, 0 means no modification.
    sensitivity    = 0.0
    scroll_factor  = 0.7
}

# ===================================================================
#                          GENERAL SETTINGS
# ===================================================================
general {
    gaps_in                  = 5
    gaps_out                 = 5
    border_size              = 2
    col.active_border        = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border      = rgba(595959aa)
    layout                   = dwindle
    allow_tearing            = false
    resize_on_border         = true
    extend_border_grab_area  = 15
}

# ===================================================================
#                        DECORATION SETTINGS
# ===================================================================
decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

    rounding = 10

    blur {
        enabled = false
        size    = 3
        passes  = 6
    }
}

# ===================================================================
#                        ANIMATION SETTINGS
# ===================================================================
animations {
    enabled = false

    bezier    = defaut, 0.10, 0.8, 0.2, 1.0
    bezier    = bounce, 0.34, 1.56, 0.64, 1

    animation = windows,      1, 2, bounce
    animation = windowsOut,   1, 2, bounce, popin 80%
    animation = border,       1, 3, bounce
    animation = borderangle,  1, 2, bounce
    animation = fade,         1, 2, bounce
    animation = workspaces,   1, 1, defaut
}

# ===================================================================
#                         LAYOUT SETTINGS
# ===================================================================
master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
}

# ===================================================================
#                        GESTURE SETTINGS
# ===================================================================
gestures {
    workspace_swipe = true
}

# ===================================================================
#                     MISCELLANEOUS SETTINGS
# ===================================================================
misc {
    # kek!
    # https://github.com/hyprwm/hyprland-wiki/issues/193
    vfr = false # keep on

    # Freesync and stuff
    vrr = 0 # keep off

    disable_hyprland_logo      = true
    mouse_move_enables_dpms    = true
    key_press_enables_dpms     = true
    enable_swallow             = true
    swallow_regex              = ^(Alacritty|foot|kitty|wezterm)$
    force_default_wallpaper    = -1 # Set to 0 or 1 to disable the anime mascot wallpapers
}

# ===================================================================
#                     WORKSPACE CONFIGURATION
# ===================================================================

# Autostart applications on workspaces
exec-once = [workspace 1 silent]   $workIde ~/projects/nixos
exec-once = [workspace 2 silent]   $workBrowser
# exec-once = [workspace 3 silent]
exec-once = [workspace 8 silent]   $personalObsidian
exec-once = [workspace 9 silent]   $personalBrowser

exec-once = [workspace special:popupWorkspace silent] $workBrowser
exec-once = [workspace special:popupWorkspace silent] $terminal -e btop

# Workspaces 1-7: sempre no monitor principal (DP-1)
workspace = 1,monitor:DP-1,default=true
workspace = 2,monitor:DP-1,default=true
workspace = 3,monitor:DP-1,default=true
workspace = 4,monitor:DP-1,default=true
workspace = 5,monitor:DP-1,default=true
workspace = 6,monitor:DP-1,default=true

# Workspaces 8-10: prioridade absoluta no HDMI-A-1, fallback para DP-2
workspace = 7,monitor:HDMI-A-1,default=true
workspace = 7,monitor:DP-2
workspace = 8,monitor:HDMI-A-1,default=true
workspace = 8,monitor:DP-2
workspace = 9,monitor:HDMI-A-1,default=true
workspace = 9,monitor:DP-2
workspace = 10,monitor:HDMI-A-1,default=true
workspace = 10,monitor:DP-2

# ===================================================================
#                           WINDOW RULES
# ===================================================================
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = bordersize 5, bordercolor rgb(ff0000) rgb(ff9900) 45deg, fullscreen:1

# ===================================================================
#                        MAGIC WORKSPACES
# ===================================================================
bind = SUPER,        Grave,         togglespecialworkspace, popupWorkspace
bind = SUPER SHIFT,  Grave,         movetoworkspacesilent,   special:popupWorkspace

windowrulev2 = bordercolor rgb(79AC44), onworkspace:special:popupWorkspace
windowrulev2 = bordersize 5, onworkspace:special:popupWorkspace
# ===================================================================
#                          TOOLS KEYBINDS
# ===================================================================

# Plugin keybinds
# bind = SUPER, Space, hyprexpo:expo, toggle
# bind = SUPER, s, overview:toggle

# Hyprtasking keybinds
bind = MOD3, Escape, hyprtasking:killhovered
bind = SUPER SHIFT, space, hyprtasking:toggle, all
bind = SUPER, space, hyprtasking:toggle, all
bind = , escape, hyprtasking:if_active, hyprtasking:toggle cursor

# bind = , escape, hyprtasking:toggle, cursor
# bind = , escape, hyprtasking:if_active, hyprtasking:toggle cursor
# bind = SUPER, X, hyprtasking:killhovered

# bind = SUPER, tab, hyprtasking:toggle, cursor
# NOTE: the lack of a comma after hyprtasking:toggle!
# bind = , escape, hyprtasking:if_active, hyprtasking:toggle cursor


# bind = SUPER, X, hyprtasking:killhovered

bind = SUPER, a, hyprtasking:move, left
bind = SUPER, s, hyprtasking:move, down
bind = SUPER, w, hyprtasking:move, up
bind = SUPER, d, hyprtasking:move, right

# --- Basic Apps ---
bind = MOD3, Space,         exec, $menu
bind = SUPER, l,            exec, $lock
bind = SUPER, p,            exec, $displayManager
bind = SUPER, Tab,          fullscreen, 1
bind = SUPER ALT, Tab,      fullscreen, 0
bind = SUPER, F11,          fullscreenstate, 0 3

# --- Scripts ---
bind = SUPER, n, exec, ~/.config/hypr/toggle-theme.sh

# --- Apps ---
bind = SUPER, Comma, exec, $zed ~/projects/nixos
bind = SUPER, t,     exec, $terminal
bind = SUPER, b,     exec, $workBrowser

# --- Print Screens ---
bind = SUPER,        u, exec, $printScreen
bind = SUPER SHIFT,  u, exec, $tesseract

# ===================================================================
#                            KEYBINDINGS
# ===================================================================

# --- Caps Shortcuts ---
# bind = MOD3, Escape, killactive,
bind = MOD3, Delete, exit

# --- Super binds ---
bind = SUPER, V, togglefloating,

# ===================================================================
#                        WASD COMMANDS
# ===================================================================

# Focus movement (SUPER + WASD)
bind = SUPER, a, movefocus, l
bind = SUPER, d, movefocus, r
bind = SUPER, w, movefocus, u
bind = SUPER, s, movefocus, d

# Window movement within workspace (SUPER + CTRL + WASD)
bind = SUPER CTRL, a, movewindow, l
bind = SUPER CTRL, d, movewindow, r
bind = SUPER CTRL, w, movewindow, u
bind = SUPER CTRL, s, movewindow, d

# Resize workspace (SUPER + ALT + WASD)
binde = SUPER ALT, a, resizeactive, -20 0
binde = SUPER ALT, d, resizeactive, 20 0
binde = SUPER ALT, w, resizeactive, 0 -20
binde = SUPER ALT, s, resizeactive, 0 20

# ===================================================================
#                        ARROWS COMMANDS (ergonomics)
# ===================================================================

# Focus movement (SUPER + ARROWS)
bind = SUPER, left,  movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up,    movefocus, u
bind = SUPER, down,  movefocus, d

# Window movement within workspace (SUPER + CTRL + ARROWS)
bind = SUPER CTRL, left,  movewindow, l
bind = SUPER CTRL, right, movewindow, r
bind = SUPER CTRL, up,    movewindow, u
bind = SUPER CTRL, down,  movewindow, d

# Resize workspace (SUPER + ALT + ARROWS)
binde = SUPER ALT, left,  resizeactive, -20 0
binde = SUPER ALT, right, resizeactive, 20 0
binde = SUPER ALT, up,    resizeactive, 0 -20
binde = SUPER ALT, down,  resizeactive, 0 20

# ===================================================================
#                        WINDOW MANAGEMENT
# ===================================================================

# --- Switch workspaces with mainMod + [0-9] ---
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move windows to workspaces (SUPER + SHIFT + 1-0) silently
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9
bind = SUPER SHIFT, 0, movetoworkspacesilent, 10

# ===================================================================
#                        MOUSE MANAGEMENT
# ===================================================================
bindm = SUPER, mouse:272, movewindow      # LMB
bindm = SUPER, mouse:273, resizewindow    # RMB

# ===================================================================
#                      MULTIMEDIA SETTINGS
# ===================================================================

# --- Audio controls ---
bind = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
bind = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%-
bind = , XF86AudioMute,        exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , XF86AudioMicMute,     exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind = , XF86AudioPlay,        exec, playerctl play-pause
bind = , XF86AudioPause,       exec, playerctl play-pause
bind = , XF86AudioNext,        exec, playerctl next
bind = , XF86AudioPrev,        exec, playerctl previous

# --- Brightness controls ---
bind = , XF86MonBrightnessUp,   exec, brightnessctl set 2%+
bind = , XF86MonBrightnessDown, exec, brightnessctl set 2%-

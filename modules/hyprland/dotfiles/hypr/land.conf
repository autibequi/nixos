# ===================================================================
#                          MONITOR CONFIGURATION
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Monitors/

# Default monitor
monitor = ,highres,auto,1.6

# Generated by nwg-displays on 2025-07-11 at 15:21:12. Do not edit manually.
monitor = DP-2,3840x2160@60.0,2596x1707,1.6
monitor = HDMI-A-1,2560x1600@60.0,996x1851,1.6

# ===================================================================
#                       WORKSPACE TO MONITOR BINDINGS
# ===================================================================
# Workspaces 1-6 sempre abrem no monitor principal (DP-2)
workspace = 1, monitor:DP-2
workspace = 2, monitor:DP-2
workspace = 3, monitor:DP-2
workspace = 4, monitor:DP-2
workspace = 5, monitor:DP-2
workspace = 6, monitor:DP-2

# Workspaces 7-10 sempre abrem no monitor secundário (HDMI-A-1)
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1
workspace = 9, monitor:HDMI-A-1
workspace = 10, monitor:HDMI-A-1

# ===================================================================
#                           PROGRAM ALIASES
# ===================================================================
$terminal         = alacritty
$fileManager      = dolphin
$menu             = anyrun
$lock             = hyprlock
$tesseract        = grim -g "$(slurp)" - | tesseract stdin stdout -l eng | wl-copy
$printScreen      = grim -g "$(slurp)" - | satty -f - --early-exit --fullscreen --copy-command wl-copy
$obsidian         = obsidian
$workBrowser      = chromium
$personalBrowser  = flatpak run app.zen_browser.zen
$workIde          = cursor
$zed              = zeditor
$displayManager   = nwg-displays
$networkManager   = nmtui
$audioManager     = ncpamixer
$workObsidian     = xdg-open "obsidian://open?vault=Work"
$personalObsidian = xdg-open "obsidian://open?vault=books"
$gemini           = chromium --app=https://gemini.google.com
$calendar         = chromium --app=https://calendar.google.com

# ===================================================================
#                         EXECUTION COMMANDS
# ===================================================================
exec-once = hyprctl setcursor macOS 35

exec-once = mkdir -p ~/.cache/hyprland
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# --- Waybar ---
exec      = ~/.config/waybar/restart.sh

# --- Wallpaper ---
exec-once = swww-daemon
exec-once     = swww img ~/.wallpapers/dark.jpg --transition-fps 120 --transition-step 200

# --- Other ---
exec-once      = hyprshade auto
exec-once      = hypridle

# ===================================================================
#                          PLUGIN SETTINGS
# ===================================================================
# Load all the plugins you installed
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprexpo.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprspace.so"
# exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprwinwrap.so"

# Load hyprtasking from local directory (if exists)
exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhyprtasking.so"
exec-once = hyprctl plugin load "$HYPR_PLUGIN_DIR/lib/libhypr-dynamic-cursors.so"

plugin {
    # hyprexpo {
    #     columns           = 3
    #     gap_size          = 10
    #     bg_col            = rgb(111111)
    #     workspace_method  = first 1 # [center/first] [workspace] e.g. first 1 or center m+1

    #     enable_gesture    = true    # laptop touchpad
    #     gesture_fingers   = 3       # 3 or 4
    #     gesture_distance  = 300     # how far is the "max"
    #     gesture_positive  = false   # positive = swipe down. Negative = swipe up.
    # }

    # hyprspace {
    #     workspace_method  = first 1 # [center/first] [workspace] e.g. first 1 or center m+1
    # }

    dynamic-cursors {
        enabled = true

        # tilt    - tilt the cursor based on x-velocity
        # rotate  - rotate the cursor based on movement direction
        # stretch - stretch the cursor shape based on direction and velocity
        # none    - do not change the cursors behaviour
        mode = rotate

        # minimum angle difference in degrees after which the shape is changed
        # smaller values are smoother, but more expensive for hw cursors
        threshold = 2

        # shake to find
        shake {
            enabled = true

            # use nearest-neighbour (pixelated) scaling when shaking
            # may look weird when effects are enabled
            nearest = true

            # controls how soon a shake is detected
            # lower values mean sooner
            threshold = 6.0

            base = 2.0 # magnification level immediately after shake start
            speed = 1.0  # magnification increase per second when continuing to shake
            influence = 1.0 # how much the speed is influenced by the current shake intensitiy
            limit = 3.0 # maximal magnification the cursor can reach
            timeout = 500
            effects = false
            ipc = false
        }
    }


    # --- Customized hyprtasking visuals to stand out ---
    hyprtasking {
        layout = grid
        exit_on_hovered = false

        # Make hyprtasking visually distinct
        gap_size = 20
        # Invert the background color for hyprtasking (below special workspace)
        bg_color = 0xeee5e5d0   # inverted from 0xee1a1a2f (deep magenta-blue to light yellowish)
        border_size = 5

        gestures {
            enabled = true

            # Configuração dos gestos do hyprtasking:
            # - *_fingers: número de dedos para acionar o gesto
            # - *_distance: na verdade é a VELOCIDADE do gesto (pixels/segundo)

            move_fingers = 4      # # dedos para mover janela
            move_distance = 200   # velocidade do movimento (não distância!)

            open_fingers = 3      # dedos para abrir janela
            open_distance = 200   # velocidade de abertura (não distância!)

            open_positive = true  # direção positiva abre janela
        }

        grid {
            rows = 3
            cols = 3
            loop = false
            gaps_use_aspect_ratio = false
        }

        linear {
            height = 300
            scroll_speed = 1.5
            blur = true
            blur_size = 8
            blur_passes = 4
        }
    }
}

# ===================================================================
#                           INPUT SETTINGS
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout    = us
    kb_variant   = altgr-intl
    kb_options   = caps:hyper # your caps is now MOD3, use wisely

    kb_model     =
    kb_rules     =

    follow_mouse     = 1
    accel_profile    = flat
    force_no_accel   = false

    repeat_rate = 25
    repeat_delay = 250

    touchpad {
        natural_scroll         = true
        disable_while_typing   = true
        tap-to-click           = true
        drag_lock              = false
        clickfinger_behavior   = false
    }

    # -1.0 - 1.0, 0 means no modification.
    sensitivity    = 0.0
    scroll_factor  = 0.7
}

# ===================================================================
#                          GENERAL SETTINGS
# ===================================================================
general {
    gaps_in                  = 5
    gaps_out                 = 5
    border_size              = 2
    # Invert active/inactive border colors for all workspaces except special ones
    col.active_border        = rgba(cc330011) rgba(ff006611) 45deg
    col.inactive_border      = rgba(a6a6a655)
    layout                   = dwindle # master or dwindle
    allow_tearing            = false
    resize_on_border         = true
    extend_border_grab_area  = 15
}

# ===================================================================
#                        DECORATION SETTINGS
# ===================================================================
decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

    rounding = 5

    blur {
        enabled = false
        size    = 3
        passes  = 6
    }
}

# ===================================================================
#                        ANIMATION SETTINGS
# ===================================================================
animations {
    enabled = true

    bezier    = defaut, 0.10, 0.8, 0.2, 1.0
    bezier    = bounce, 0.34, 1.56, 0.64, 1
    bezier    = zawarudo_popin, 0.03, 1.0, 0.3, 1.0


    animation = windows,      1, 2, bounce
    animation = windowsOut,   1, 2, bounce, popin 80%
    animation = border,       1, 3, bounce
    animation = borderangle,  1, 2, bounce
    animation = fade,         1, 2, bounce
    animation = workspaces,   1, 1, defaut

    # Zawarudo workspace: efeito de popin total com curva personalizada
    animation = specialWorkspace, 1, 1, zawarudo_popin
}

# ===================================================================
#                         LAYOUT SETTINGS
# ===================================================================
master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
}

# ===================================================================
#                        GESTURE SETTINGS
# ===================================================================
# gestures {
#     workspace_swipe = true
# }

# ===================================================================
#                     MISCELLANEOUS SETTINGS
# ===================================================================
misc {
    # kek!
    # https://github.com/hyprwm/hyprland-wiki/issues/193
    vfr = false # keep on for battery

    # Freesync and stuff
    vrr = 0 # keep off

    disable_hyprland_logo      = true
    mouse_move_enables_dpms    = true
    key_press_enables_dpms     = true
    enable_swallow             = true
    swallow_regex              = ^(Alacritty|foot|kitty|wezterm)$
    force_default_wallpaper    = -1 # Set to 0 or 1 to disable the anime mascot wallpapers
}

# ===================================================================
#                           SMART GAPS
# ===================================================================

# Smart gaps / no gaps when only one tiled window
workspace = w[tv1], gapsout:5, gapsin:5
windowrulev2 = noborder, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]

# ===================================================================
#                     WORKSPACE CONFIGURATION
# ===================================================================

# Autostart applications on workspaces
exec-once = [workspace 1 silent]   $workIde ~/projects/nixos
exec-once = [workspace 2 silent]   $workBrowser
exec-once = [workspace 9 silent]   $personalBrowser

# Workspaces 1-7: sempre no monitor principal (DP-1)
workspace = 1,monitor:DP-1,default=true
workspace = 2,monitor:DP-1,default=true
workspace = 3,monitor:DP-1,default=true
workspace = 4,monitor:DP-1,default=true
workspace = 5,monitor:DP-1,default=true
workspace = 6,monitor:DP-1,default=true

# Workspaces 8-10: prioridade absoluta no HDMI-A-1, fallback para DP-2
workspace = 7,monitor:HDMI-A-1,default=true
workspace = 7,monitor:DP-2
workspace = 8,monitor:HDMI-A-1,default=true
workspace = 8,monitor:DP-2
workspace = 9,monitor:HDMI-A-1,default=true
workspace = 9,monitor:DP-2
workspace = 10,monitor:HDMI-A-1,default=true
workspace = 10,monitor:DP-2

# ===================================================================
#                  SPECIAL WORKSPACES CONFIGURATION
# ===================================================================
windowrulev2 = bordercolor rgb(888888) rgb(6a5acd) 70deg, onworkspace:special:zawarudo
windowrulev2 = bordersize 5, onworkspace:special:zawarudo
windowrulev2 = animation zawarudo_popin, onworkspace:special:zawarudo
bind = SUPER,        Grave,         togglespecialworkspace, zawarudo
bind = SUPER SHIFT,  Grave,         movetoworkspacesilent,   special:zawarudo
workspace = special:zawarudo, gapsout:84
exec-once = [workspace special:zawarudo silent] $terminal -e btop

# --- Super+J: abrir workspace especial de journal ---
windowrulev2 = bordercolor rgb(a0522d) rgb(b87333) 45deg, onworkspace:special:journal
windowrulev2 = bordersize 5, onworkspace:special:journal
bind = SUPER, j, togglespecialworkspace, journal
bind = SUPER SHIFT, j, movetoworkspacesilent, special:journal
workspace = special:journal, gapsout:84,on-created-empty: $workObsidian

# ===================================================================
#                           WINDOW RULES
# ===================================================================
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = bordersize 2, bordercolor rgb(00ffff) rgb(0066ff) 45deg, fullscreen:1
windowrulev2 = float, title:^(satty)$

# ===================================================================
#                          TOOLS KEYBINDS
# ===================================================================

# Hyprtasking keybinds
bind = MOD3, Escape, hyprtasking:killhovered
bind = SUPER, space, hyprtasking:toggle, cursor
bind = , escape, hyprtasking:if_active, hyprtasking:toggle cursor

# --- Basic Apps ---
bind = MOD3, Space,         exec, $menu
bind = SUPER, l,            exec, $lock
bind = SUPER, p,            exec, $displayManager
bind = SUPER, k,            exec, $workObsidian
bind = SUPER, t,            exec, $terminal
bind = SUPER, Comma,        exec, $zed ~/projects/nixos
bind = SUPER, b,            exec, $workBrowser
bind = SUPER, g,            exec, $gemini

# --- Full Screenses ---
bind = SUPER, tab,          fullscreen, 1
bind = SUPER ALT, Tab,      fullscreen, 0
bind = SUPER, F11,          fullscreenstate, 0 3

# --- Print Screenses ---
bind = SUPER,        u, exec, $printScreen
bind = SUPER SHIFT,  u, exec, $tesseract

# --- Dark Mode ---
bind = SUPER, n, exec, ~/.config/hypr/toggle-theme.sh
bind = SUPER SHIFT, n, exec, hyprshade toggle

# ===================================================================
#                            KEYBINDINGS
# ===================================================================

# --- Caps Shortcuts ---
# bind = MOD3, Escape, killactive,
bind = MOD3, Delete, exit

# --- Super binds ---
bind = SUPER, V, togglefloating,

# ===================================================================
#                        WASD COMMANDS
# ===================================================================
# Focus movement (SUPER + WASD)
binde = SUPER, a, movefocus, l
binde = SUPER, d, movefocus, r
binde = SUPER, w, movefocus, u
binde = SUPER, s, movefocus, d

# Window movement within workspace (SUPER + SHIFT + WASD)
binde = SUPER SHIFT, a, movewindow, l
binde = SUPER SHIFT, d, movewindow, r
binde = SUPER SHIFT, w, movewindow, u
binde = SUPER SHIFT, s, movewindow, d

# Resize workspace (SUPER + CTRL + WASD)
binde = SUPER CTRL, a, resizeactive, -20 0
binde = SUPER CTRL, d, resizeactive, 20 0
binde = SUPER CTRL, w, resizeactive, 0 -20
binde = SUPER CTRL, s, resizeactive, 0 20

# ===================================================================
#                        ARROWS COMMANDS (ergonomics)
# ===================================================================

# Focus movement (SUPER + ARROWS)
binde = SUPER, left,  movefocus, l
binde = SUPER, right, movefocus, r
binde = SUPER, up,    movefocus, u
binde = SUPER, down,  movefocus, d

# Window movement within workspace (SUPER + SHIFT + ARROWS)
binde = SUPER SHIFT, left,  movewindow, l
binde = SUPER SHIFT, right, movewindow, r
binde = SUPER SHIFT, up,    movewindow, u
binde = SUPER SHIFT, down,  movewindow, d

# Resize workspace (SUPER + CTRL + ARROWS)
binde = SUPER CTRL, left,  resizeactive, -20 0
binde = SUPER CTRL, right, resizeactive, 20 0
binde = SUPER CTRL, up,    resizeactive, 0 -20
binde = SUPER CTRL, down,  resizeactive, 0 20

# ===================================================================
#                        WINDOW MANAGEMENT
# ===================================================================

# --- Switch workspaces with mainMod + [0-9] ---
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move windows to workspaces (SUPER + SHIFT + 1-0) silently
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9
bind = SUPER SHIFT, 0, movetoworkspacesilent, 10

# ===================================================================
#                        MOUSE MANAGEMENT
# ===================================================================
bindm = SUPER, mouse:272, movewindow      # LMB
bindm = SUPER, mouse:273, resizewindow    # RMB

# ===================================================================
#                      MULTIMEDIA SETTINGS
# ===================================================================

# --- Audio controls ---
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%-
bind = , XF86AudioMute,        exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , XF86AudioMicMute,     exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind = , XF86AudioPlay,        exec, playerctl play-pause
bind = , XF86AudioPause,       exec, playerctl play-pause
bind = , XF86AudioNext,        exec, playerctl next
bind = , XF86AudioPrev,        exec, playerctl previous

# --- Brightness controls ---
binde = , XF86MonBrightnessUp,   exec, brightnessctl set 2%+
binde = , XF86MonBrightnessDown, exec, brightnessctl set 2%-

---
description: Configura√ß√£o NixOS para o Asus G14 com RTX 4060 - Setup H√≠brido AMD/NVIDIA
globs:
alwaysApply: true
---

# üî• SETUP NIXOS - ASUS G14 RTX 4060

## HARDWARE SPECS
- **Laptop**: ASUS ROG Zephyrus G14 (2024)
- **CPU**: AMD Ryzen 9 8945HS (amd_pstate=guided)
- **GPU H√≠brida**:
  - AMD Radeon 780M (iGPU) - PCI:65:0:0
  - NVIDIA RTX 4060 Mobile (dGPU) - PCI:1:0:0
- **Storage**: NVME externo via USB-C case (JMicron JMS583)
- **Kernel**: CachyOS (linuxPackages_cachyos)

## CONFIGURA√á√ïES CR√çTICAS
- **Hiberna√ß√£o**: Configurada com suspend-then-hibernate
- **NVIDIA**: Driver propriet√°rio 575.51.02 (offload mode)
- **Power Management**: NVIDIA PM desabilitado (conflita com hiberna√ß√£o)
- **USB-C**: Dock mantido ativo (usbcore.autosuspend=-1)
- **Scheduler**: scx_lavd com autopower

## COMANDOS DISPON√çVEIS
- `nh os test .` - Testa configura√ß√£o sem aplicar
- `nh os switch .` - Aplica configura√ß√£o
- `nh os boot .` - Aplica na pr√≥xima inicializa√ß√£o

## RESTRI√á√ïES DO CURSOR AI - SANDBOX
‚ö†Ô∏è **NUNCA use sudo** - todos os comandos sudo falhar√£o no sandbox
‚ö†Ô∏è Use sempre containers como `poetry run` ou containers para evitar conflitos

## M√ìDULOS PRINCIPAIS
- `core/kernel.nix` - Configura√ß√µes de kernel e boot
- `modules/nvidia.nix` - Driver NVIDIA e configura√ß√£o PRIME
- `modules/hibernation.nix` - Configura√ß√£o otimizada de hiberna√ß√£o

Depois de solucionado o problema crie um arquivo em tmp/report/ com um markdown contendo um relatorio do que foi feito na session
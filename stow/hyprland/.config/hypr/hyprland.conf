monitor = ,highres,auto,1.6
source = ~/.config/hypr/monitors.conf

# Plugins
source = ~/.config/hypr/plugins.conf

# Experimental
render {
    # cm_auto_hdr = false
    new_render_scheduling = true
}
# ===================================================================
#                           PROGRAM ALIASES
# ===================================================================
$hyprutils = source ~/.config/hypr/hyprutils.sh &&

# Fast Ghostty
exec-once = ghostty --gtk-single-instance=true --quit-after-last-window-closed=false --initial-window=false
$terminal = ghostty --gtk-single-instance=true

$alacritty         = alacritty
$fileManager       = nautilus -w
$menu              = anyrun
$lock              = hyprlock
$tesseract         = grim -g "$(slurp)" - | tesseract stdin stdout -l eng | wl-copy
$printScreen       = grim -g "$(slurp)" - | satty -f - --early-exit --fullscreen --copy-command wl-copy
$obsidian          = obsidian
$chromium          = chromium
$chrome            = google-chrome-stable
$personalBrowser   = flatpak run app.zen_browser.zen
$workIde           = cursor
$zed               = zeditor
$displayManager    = nwg-displays
$networkManager    = nmtui
$audioManager      = ncpamixer
$workObsidian      = xdg-open "obsidian://open?vault=Work"
$personalObsidian  = xdg-open "obsidian://open?vault=books"
$gemini            = $chrome --app=https://gemini.google.com/app
$calendar          = $chrome --app=https://calendar.google.com
$chat              = $chrome --app=https://chat.google.com
$passwordManager   = proton-pass
$youtube           = $chromium --app=https://www.youtube.com
$youtubeMusic      = $chromium --app=https://music.youtube.com
$settings          = $workIde ~/projects/nixos
$jira              = $chrome --new-window https://estrategia.atlassian.net/jira/software/c/projects/FUK2/boards/323?quickFilter=1182

# ===================================================================
#                         Startup
# ===================================================================
# Cursor
exec-once = hyprctl setcursor rose-pine-hyprcursor 50
env = HYPRCURSOR_THEME,rose-pine-hyprcursor
env = HYPRCURSOR_SIZE,50

exec-once = systemctl --user start hyprpolkitagent

# Environment
exec-once = mkdir -p ~/.cache/hyprland
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Waybar
exec-once = waybar &

# Wallpaper
exec-once = swww-daemon
exec-once = swww img ~/.wallpapers/dark.jpg --transition-fps 120 --transition-step 200

# Plugins/Other
exec-once = hyprshade auto
exec-once = hypridle

# Clipboard
exec-once = wl-paste --watch cliphist store

# ===================================================================
#                           INPUT SETTINGS
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout    = us
    kb_variant   = altgr-intl
    kb_options   = caps:hyper # your caps is now MOD3, use wisely

    kb_model     =
    kb_rules     =

    follow_mouse     = 1
    accel_profile    = adaptative
    force_no_accel   = false

    natural_scroll = true
    scroll_factor = 0.7

    repeat_rate = 25
    repeat_delay = 250

    touchpad {
        natural_scroll         = true
        disable_while_typing   = true
        tap-to-click           = true
        drag_lock              = false
        clickfinger_behavior   = false
    }
}

gestures {
    workspace_swipe = true
}

# ===================================================================
#                     MISCELLANEOUS SETTINGS
# ===================================================================
misc {
    # kek!
    # https://github.com/hyprwm/hyprland-wiki/issues/193
    vfr = on # keep on for battery

    # Freesync and stuff
    vrr = off # keep off

    disable_hyprland_logo      = true
    mouse_move_enables_dpms    = true
    key_press_enables_dpms     = true
    enable_swallow             = true
    swallow_regex              = ^(Alacritty|foot|kitty|wezterm)$
    force_default_wallpaper    = -1 # Set to 0 or 1 to disable the anime mascot wallpapers
}

# ===================================================================
#                        DECORATION SETTINGS
# ===================================================================
decoration {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more

   rounding = 5

   blur {
       enabled = false
       new_optimizations = true
       ignore_opacity = true
    }
}

# ===================================================================
#                        ANIMATION SETTINGS
# ===================================================================
animations {
    enabled = true

    bezier    = defaut, 0.10, 0.8, 0.2, 1.0
    bezier    = bounce, 0.34, 1.56, 0.64, 1

    animation = windows,      1, 2, bounce
    animation = windowsOut,   1, 2, bounce, popin 80%
    animation = border,       1, 3, bounce
    animation = borderangle,  1, 2, bounce
    animation = fade,         1, 2, bounce
    animation = workspaces,   1, 1, defaut
}

# ðŸ˜Ž HyperShaders made me do this
debug {
    damage_tracking = false
}

# ===================================================================
#                     WORKSPACE CONFIGURATION
# ===================================================================

# Workspaces 1-6: always on main monitor (DP-1)
workspace = 1,monitor:DP-1,default=true
workspace = 2,monitor:DP-1,default=true
workspace = 3,monitor:DP-1,default=true
workspace = 4,monitor:DP-1,default=true
workspace = 5,monitor:DP-1,default=true
workspace = 6,monitor:DP-1,default=true

# Workspaces 7-10: prefer HDMI-A-1, fallback to DP-2
workspace = 7,monitor:HDMI-A-1,default=true
workspace = 8,monitor:HDMI-A-1,default=true
workspace = 9,monitor:HDMI-A-1,default=true
workspace = 10,monitor:HDMI-A-1,default=true

# ===================================================================
#                          FLOAT RULES
# ===================================================================
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = float, title:^(satty )$
windowrulev2 = float, class:^(proton-pass)$
windowrulev2 = float, class:^(nwg-displays)$

# Smart gaps / no gaps when only one tiled window
windowrulev2 = noborder, floating:0, onworkspace:w[tv1] !special
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1] !special

# ===================================================================
#                  GENERAL WORKSPACE CONFIGURATION
# ===================================================================
general {
    gaps_in                  = 5
    gaps_out                 = 5
    border_size              = 4
    col.active_border        =  rgba(34a853cc) rgba(7c3aedcc) 90deg,
    # col.inactive_border      = rgba(ffec80aa) rgba(ffec8044) 60deg
    layout                   = dwindle # master or dwindle
    allow_tearing            = false
    resize_on_border         = true
    extend_border_grab_area  = 30
}


# ===================================================================
#                  SPECIAL WORKSPACES CONFIGURATION
# ===================================================================
blurls = special

# Escaper
# bind = SUPER, Grave, exec, $hyprutils toggle_last_special_workspace

workspace = special:bleh, gapsout:84, on-created-empty: $terminal
windowrulev2 = bordercolor rgba(fff700dd), onworkspace:special:bleh
bind = SUPER, grave, exec, $hyprutils workspace_switch special:bleh
bind = SUPER SHIFT, grave, movetoworkspacesilent, special:bleh

# Communications (super + F1)
workspace = special:chat, gapsout:84,on-created-empty: $chat
windowrulev2 = bordercolor rgba(34a853cc), onworkspace:special:chat
bind = SUPER, C, exec, $hyprutils workspace_switch special:chat
bind = SUPER SHIFT, C, movetoworkspacesilent, special:chat

# Context (super + F2)
workspace = special:obsidian, gapsout:84, on-created-empty: $personalObsidian
windowrulev2 = bordercolor rgba(34a853cc), onworkspace:special:obsidian
bind = SUPER, o, exec, $hyprutils workspace_switch special:obsidian
bind = SUPER SHIFT, o, movetoworkspacesilent, special:obsidian

# Call (super + F4)
workspace = special:call, gapsout:84, on-created-empty: $chrome
windowrulev2 = bordercolor rgba(34a853cc), onworkspace:special:call
bind = SUPER, V, exec, $hyprutils workspace_switch special:call
bind = SUPER SHIFT, V, movetoworkspacesilent, special:call

# The forbidden (super + F5)
workspace = special:music, gapsout:84, on-created-empty: $youtubeMusic
windowrulev2 = bordercolor rgba(ff0000cc), onworkspace:special:music
bind = SUPER, M, exec, $hyprutils workspace_switch special:music
bind = SUPER SHIFT, M, movetoworkspacesilent, special:music

# 666 (super + F6)
workspace = special:jira, gapsout:84, on-created-empty: $jira
windowrulev2 = bordercolor rgba(ff0000cc), onworkspace:special:jira
bind = SUPER, J, exec, $hyprutils workspace_switch special:jira
bind = SUPER SHIFT, J, movetoworkspacesilent, special:jira

# 666 (super + F6)
workspace = special:kwiki, gapsout:84, on-created-empty: $workObsidian
windowrulev2 = bordercolor rgba(ff0000cc), onworkspace:special:kwiki
bind = SUPER, K, exec, $hyprutils workspace_switch special:kwiki
bind = SUPER SHIFT, K, movetoworkspacesilent, special:kwiki

# Gemini (super + G) - master layout
workspace = special:gemini, gapsout:84, layout:master, on-created-empty: $gemini
windowrulev2 = bordercolor rgba(7c3aedcc), onworkspace:special:gemini
bind = SUPER, G, exec, $hyprutils workspace_switch special:gemini
bind = SUPER SHIFT, G, movetoworkspacesilent, special:gemini

# settings
workspace = special:settings, gapsout:84, layout:master, on-created-empty: $settings
windowrulev2 = bordercolor rgba(7c3aedcc), onworkspace:special:settings
bind = SUPER, comma, exec, $hyprutils workspace_switch special:settings
bind = SUPER SHIFT, comma, movetoworkspacesilent, special:settings



rules {
    windowrule = noscreenshare, onworkspace:special:bleh
    windowrule = noscreenshare, onworkspace:special:obsidian
    windowrule = noscreenshare, onworkspace:special:music
    windowrule = noscreenshare, onworkspace:special:chat

    windowrule = noscreenshare, onworkspace:7
    windowrule = noscreenshare, onworkspace:8
    windowrule = noscreenshare, onworkspace:9
    windowrule = noscreenshare, onworkspace:10
}

# ===================================================================
#                          APP KEYBINDS
# ===================================================================

# App Control
bind = MOD3, Escape, killactive,
bind = MOD3, Delete, exit

# System Utils
bind = MOD3, d,           exec, $displayManager
bind = MOD3, p,     exec, hyprpicker --autocopy --lowercase-hex

# Quick Apps
bind = MOD3, Space, exec, $menu
bind = MOD3, t,     exec, $terminal
bind = MOD3, c,     exec, $workIde
bind = MOD3, e,     exec, $fileManager
bind = MOD3, z,     exec, $zed
bind = MOD3, period, exec, rofimoji --skin-tone neutral --action copy

# others
bind = MOD3, b,     exec, $chrome
bind = MOD3, g,     exec, $gemini

# Quick Apps Alternative (Shaders)
bind = MOD3, Page_Up,   exec, hyprshade next
bind = MOD3, Page_Down, exec, hyprshade prev

bind = MOD3 ALT, d, exec, hyprshade toggle ~/.config/hypr/shaders/drugs.glsl
bind = MOD3 ALT, c, exec, hyprshade toggle ~/.config/hypr/shaders/cathode.frag
bind = MOD3 ALT, s, exec, hyprshade toggle ~/.config/hypr/shaders/scanlines.glsl
bind = MOD3 ALT, g, exec, hyprshade toggle ~/.config/hypr/shaders/grain.frag
bind = MOD3 ALT, r, exec, hyprshade toggle ~/.config/hypr/shaders/red.frag
bind = MOD3 ALT, w, exec, hyprshade toggle ~/.config/hypr/shaders/woble.frag
bind = MOD3 ALT, m, exec, hyprshade toggle ~/.config/hypr/shaders/mono.frag
bind = MOD3 ALT, l, exec, hyprshade toggle ~/.config/hypr/shaders/lsd.glsl

# ===================================================================
#                          TOOLS KEYBINDS
# ===================================================================

# System App Shortcuts
bind = SUPER, r,           exec, $hyprutils waybar_refresh
bind = SUPER SHIFT, r,     exec, $hyprutils hypr_reload
bind = SUPER, l,           exec, $lock

# Fullscreen
bind = SUPER, tab,     fullscreen, 1
bind = SUPER ALT, Tab, fullscreen, 0
bind = SUPER, F11,     fullscreenstate, 0 3

# Print Screen
bind = SUPER,       u, exec, $printScreen
bind = SUPER SHIFT, u, exec, $tesseract

# Floating
bind = SUPER SHIFT, Tab, togglefloating,

# Layouts
bind = SUPER, m, exec, hyprctl keyword general:layout master
bind = SUPER ALT, m, exec, hyprctl keyword general:layout dwindle

# Clipboard History (Anyrun)
bind = MOD3, v, exec, cliphist list | anyrun --show-results-immediately true --plugins libstdin.so | cliphist decode | wl-copy

# Dark Mode
bind = SUPER, n, exec, $hyprutils toggle_theme
bind = SUPER SHIFT, n, exec, hyprshade toggle

# ===================================================================
#                        WASD COMMANDS
# ===================================================================
# Focus movement (SUPER + WASD)
binde = SUPER, a, movefocus, l
binde = SUPER, d, movefocus, r
binde = SUPER, w, movefocus, u
binde = SUPER, s, movefocus, d

# Window movement within workspace (SUPER + SHIFT + WASD)
binde = SUPER SHIFT, a, movewindow, l
binde = SUPER SHIFT, d, movewindow, r
binde = SUPER SHIFT, w, movewindow, u
binde = SUPER SHIFT, s, movewindow, d

# Resize workspace (SUPER + ALT + WASD)
binde = SUPER ALT, a, resizeactive, -20 0
binde = SUPER ALT, d, resizeactive, 20 0
binde = SUPER ALT, w, resizeactive, 0 -20
binde = SUPER ALT, s, resizeactive, 0 20

# ===================================================================
#                        ARROWS COMMANDS (ergonomics)
# ===================================================================

# Focus movement (SUPER + ARROWS)
binde = SUPER, left,  movefocus, l
binde = SUPER, right, movefocus, r
binde = SUPER, up,    movefocus, u
binde = SUPER, down,  movefocus, d

# Window movement within workspace (SUPER + SHIFT + ARROWS)
binde = SUPER SHIFT, left,  movewindow, l
binde = SUPER SHIFT, right, movewindow, r
binde = SUPER SHIFT, up,    movewindow, u
binde = SUPER SHIFT, down,  movewindow, d

# Resize workspace (SUPER + CTRL + ARROWS)
binde = SUPER CTRL, left,  resizeactive, -20 0
binde = SUPER CTRL, right, resizeactive, 20 0
binde = SUPER CTRL, up,    resizeactive, 0 -20
binde = SUPER CTRL, down,  resizeactive, 0 20

# ===================================================================
#                        WINDOW MANAGEMENT
# ===================================================================

# Always escape the special workspaces every workspace switch
bind = SUPER, 1, exec, $hyprutils workspace_switch 1
bind = SUPER, 2, exec, $hyprutils workspace_switch 2
bind = SUPER, 3, exec, $hyprutils workspace_switch 3
bind = SUPER, 4, exec, $hyprutils workspace_switch 4
bind = SUPER, 5, exec, $hyprutils workspace_switch 5
bind = SUPER, 6, exec, $hyprutils workspace_switch 6
bind = SUPER, 7, exec, $hyprutils workspace_switch 7
bind = SUPER, 8, exec, $hyprutils workspace_switch 8
bind = SUPER, 9, exec, $hyprutils workspace_switch 9
bind = SUPER, 0, exec, $hyprutils workspace_switch 10

# Move windows to workspaces (SUPER + SHIFT + 1-0) silently
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9
bind = SUPER SHIFT, 0, movetoworkspacesilent, 10

# ===================================================================
#                        MOUSE MANAGEMENT
# ===================================================================
bindm = SUPER, mouse:272, movewindow      # LMB
bindm = SUPER, mouse:273, resizewindow    # RMB

# ===================================================================
#                      MULTIMEDIA SETTINGS
# ===================================================================

# Audio controls
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%-
bind  = , XF86AudioMute,        exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind  = , XF86AudioMicMute,     exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind  = , XF86AudioPlay,        exec, playerctl play-pause
bind  = , XF86AudioPause,       exec, playerctl play-pause
bind  = , XF86AudioNext,        exec, playerctl next
bind  = , XF86AudioPrev,        exec, playerctl previous

# Brightness controls
binde = , XF86MonBrightnessUp,   exec, brightnessctl set 2%+
binde = , XF86MonBrightnessDown, exec, brightnessctl set 2%-

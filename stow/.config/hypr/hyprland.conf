monitor = ,highres,auto,1.6
source = ~/.config/hypr/monitors.conf

# Plugins
source = ~/.config/hypr/hyprplugins.conf
# source = ~/.config/hypr/pyprland.conf

# GPU
# env = AQ_DRM_DEVICES,/dev/dri/card0:/dev/dri/card1

# Experimental
render {
    # cm_auto_hdr = true
    # new_render_scheduling = true
}

# ===================================================================
#                           PROGRAM ALIASES
# ===================================================================
$hyprutils = source ~/.config/hypr/hyprutils.sh &&

# Fast Ghostty
# exec-once = ghostty --gtk-single-instance=true --quit-after-last-window-closed=false --initial-window=false
$terminal = alacritty

$alacritty         = alacritty
$fileManager       = nautilus -w
$menu              = rofi -show drun
$lock              = hyprlock
$tesseract         = grim -g "$(slurp)" - | tesseract stdin stdout -l eng | wl-copy
$printScreen       = grim -g "$(slurp)" - | satty -f - --early-exit --fullscreen --copy-command wl-copy
$obsidian          = obsidian
$chromium          = chromium
$chrome            = google-chrome-stable

$personalBrowser   = flatpak run app.zen_browser.zen
$workIde           = cursor
$zed               = zeditor
$displayManager    = nwg-displays
$networkManager    = nmtui
$audioManager      = ncpamixer
$workObsidian      = xdg-open "obsidian://open?vault=Work"
$personalObsidian  = xdg-open "obsidian://open?vault=books"
$gemini            = $chrome --app=https://gemini.google.com/app
$calendar          = $chrome --app=https://calendar.google.com
$chat              = $chrome --app=https://chat.google.com
$passwordManager   = proton-pass
$youtube           = $chromium --app=https://www.youtube.com
$youtubeMusic      = $chromium --app=https://music.youtube.com
$monkeyType        = $chromium --app=https://monkeytype.com
$rainmaker         = $chromium --app=https://www.youtube.com/watch?v=1Xiwqm94T4k
$settings          = $zed ~/projects/nixos
$jira              = $chrome --new-window https://estrategia.atlassian.net/jira/software/c/projects/FUK2/boards/323?quickFilter=1182
$insomnia          = insomnia


# ===================================================================
#                         Startup
# ===================================================================
# Cursor
exec-once = hyprctl setcursor rose-pine-hyprcursor 50
env = HYPRCURSOR_THEME,rose-pine-hyprcursor
env = HYPRCURSOR_SIZE,50

exec-once = systemctl --user start hyprpolkitagent

# Environment
exec-once = mkdir -p ~/.cache/hyprland
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Waybar
exec-once = $hyprutils waybar_refresh

# Wallpaper
exec-once = swww-daemon
# exec-once = waytrogen --random ~/assets/wallpapers/

# Notifications
exec-once = swaync

# Theme Management
exec-once = $hyprutils dark_theme

# Plugins/Other
exec-once = hypridle
# exec-once = pypr --debug /tmp/pypr.log

# Clipboard
exec-once = wl-paste --watch cliphist store

# ===================================================================
#                           INPUT SETTINGS
# ===================================================================
# ref: https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout    = us
    kb_variant   = altgr-intl
    kb_options   = caps:hyper # your caps is now MOD3, use wisely

    kb_model     =
    kb_rules     =

    follow_mouse     = 1
    accel_profile    = adaptative
    force_no_accel   = false

    natural_scroll = true
    scroll_factor = 0.7

    repeat_rate = 25
    repeat_delay = 250

    touchpad {
        natural_scroll         = true
        disable_while_typing   = true
        tap-to-click           = true
        drag_lock              = false
        clickfinger_behavior   = false
    }
}

# gesture = 3, horizontal, workspace

# ===================================================================
#                     MISCELLANEOUS SETTINGS
# ===================================================================
misc {
    # kek!
    # https://github.com/hyprwm/hyprland-wiki/issues/193
    vfr = on # keep on for battery

    # Freesync and stuff
    vrr = on # keep off

    disable_hyprland_logo      = true
    mouse_move_enables_dpms    = true
    key_press_enables_dpms     = true
    enable_swallow             = true
    swallow_regex              = ^(Alacritty|foot|kitty|wezterm)$
    disable_hyprland_logo = true
    force_default_wallpaper    = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
}

# ===================================================================
#                        DECORATION SETTINGS
# ===================================================================
# See https://wiki.hyprland.org/Configuring/Variables/ for more
decoration {
   rounding = 1
   shadow {
    enabled = false
   }

   blur {
       enabled = false
       new_optimizations = true
       ignore_opacity = true
    }
}

# ===================================================================
#                        ANIMATION SETTINGS
# ===================================================================
animations {
    enabled = true

    # 1. Smooth & Snappy (Good for high-res 4K)
    bezier = pace, 0.05, 0.9, 0.1, 1.00

    # 2. Overshot (The window "bounces" slightly)
    bezier = overshot, 0.05, 0.9, 0.1, 1.1

    # 3. Linear (Constant speed)
    bezier = linear, 0.0, 0.0, 1.0, 1.0

    animation = windows,      1, 3, pace,
    animation = windowsOut,   1, 3, pace, popin 80%
    animation = border,       1, 4, pace
    animation = borderangle,  1, 4, pace
    animation = fade,         1, 2, pace
    animation = workspaces,   1, 1.5, pace

    # Magic workspaces - smooth switching between workspaces
    animation = specialWorkspace, 1, 4, pace, slidevert
}

# ðŸ’¡ damage_tracking = 2 (full) saves ~20-30% GPU
# Note: Some shaders may flicker. Toggle to 0 via keybind if needed.
debug {
    damage_tracking = 2
}

# ===================================================================
#                     WORKSPACE CONFIGURATION
# ===================================================================

# Workspaces 1-6: always on main monitor (DP-1)
workspace = 1,monitor:DP-1,default=true
workspace = 2,monitor:DP-1,default=true
workspace = 3,monitor:DP-1,default=true
workspace = 4,monitor:DP-1,default=true
workspace = 5,monitor:DP-1,default=true
workspace = 6,monitor:DP-1,default=true

# Workspaces 7-10: prefer HDMI-A-1, fallback to DP-2
workspace = 7,monitor:HDMI-A-1,default=true
workspace = 8,monitor:HDMI-A-1,default=true
workspace = 9,monitor:HDMI-A-1,default=true
workspace = 10,monitor:HDMI-A-1,default=true


# # Private Workspaces
windowrulev3 = noscreenshare, onworkspace:7
windowrulev3 = noscreenshare, onworkspace:8
windowrulev3 = noscreenshare, onworkspace:9
windowrulev3 = noscreenshare, onworkspace:10


# Special Workspaces
source = ~/.config/hypr/special-workspaces.conf

# ===================================================================
#                    DYNAMIC BORDERS (Visual Feedback)
# ===================================================================

# EVA-01 Default Theme (purple + green gradient)
# Bordas padrÃ£o definidas em general {}

# Maximizado (fullscreen maximize) â†’ borda grossa vermelha
windowrulev3 = bordersize 5, fullscreen:1
windowrulev3 = bordercolor rgba(ff0000ff) rgba(cc0000ff) 45deg, fullscreen:1

# Special Workspaces â†’ rosa e verde
windowrulev3 = bordercolor rgba(ff69b4ff) rgba(00ff88ff) 45deg, onworkspace:s[true]

# Special Workspaces maximizados â†’ borda grossa rosa/verde
windowrulev3 = bordersize 12, onworkspace:s[true] fullscreen:1
windowrulev3 = bordercolor rgba(ff69b4ff) rgba(00ff88ff) 45deg, onworkspace:s[true] fullscreen:1

# ===================================================================
#                  GENERAL WORKSPACE CONFIGURATION
# ===================================================================
general {
    gaps_in                  = 5
    gaps_out                 = 5
    border_size              = 3
    col.active_border        = rgba(7c3aedff) rgba(00ff41ff) 45deg
    col.inactive_border      = rgba(2d1b4eaa) rgba(003d11aa) 45deg
    layout                   = dwindle # master or dwindle
    allow_tearing            = false
    resize_on_border         = true
    extend_border_grab_area  = 30
}

# ===================================================================
#                          APP KEYBINDS
# ===================================================================

# App Control
bind = MOD3, Escape, killactive,
bind = MOD3, Delete, exit

# System Utils
bind = MOD3, d,           exec, $displayManager
bind = MOD3, p,     exec, hyprpicker --autocopy --lowercase-hex

# Quick Apps
bind = MOD3, Space, exec, $menu
bind = MOD3, t,     exec, $terminal
bind = MOD3, c,     exec, $workIde
bind = MOD3, e,     exec, $fileManager
bind = MOD3, z,     exec, $zed
bind = MOD3, period, exec, rofimoji --skin-tone neutral --action copy
bind = MOD3, n, exec, swaync-client -t -s
bind = MOD3, slash, exec, $HOME/.config/hypr/hyprshortcuts.sh

# others
bind = MOD3, b,     exec, $chrome
bind = MOD3, g,     exec, $gemini

# Quick Apps Alternative (Shaders)
bind = MOD3, Page_Up,   exec, hyprshade next
bind = MOD3, Page_Down, exec, hyprshade prev

# Toggle damage_tracking (0=off for shaders, 2=full for perf)
# bind = MOD3 ALT, 0, exec, hyprctl keyword debug:damage_tracking 0 && notify-send "Damage Tracking OFF" "GPU mode: shader-friendly"
# bind = MOD3 ALT, 2, exec, hyprctl keyword debug:damage_tracking 2 && notify-send "Damage Tracking ON" "GPU mode: optimized"

bind = MOD3 ALT, d, exec, hyprshade toggle ~/.config/hypr/shaders/drugs.glsl
bind = MOD3 ALT, c, exec, hyprshade toggle ~/.config/hypr/shaders/cathode.frag
bind = MOD3 ALT, s, exec, hyprshade toggle ~/.config/hypr/shaders/scanlines.glsl
bind = MOD3 ALT, g, exec, hyprshade toggle ~/.config/hypr/shaders/grain.frag
bind = MOD3 ALT, r, exec, hyprshade toggle ~/.config/hypr/shaders/red.frag
bind = MOD3 ALT, w, exec, hyprshade toggle ~/.config/hypr/shaders/woble.frag
bind = MOD3 ALT, m, exec, hyprshade toggle ~/.config/hypr/shaders/mono.frag
bind = MOD3 ALT, l, exec, hyprshade toggle ~/.config/hypr/shaders/lsd.glsl

# yellow tint
bind = MOD3 ALT, y, exec, hyprshade toggle blue-light-filter


# ===================================================================
#                          TOOLS KEYBINDS
# ===================================================================

# Toggle special workspace on bare SUPER press (release without combo)
# Com special ativo â†’ esconde | Sem special â†’ reabre o Ãºltimo usado
bindr = SUPER, Super_L, exec, $hyprutils toggle_or_hide_special_workspace

# System App Shortcuts
bind = SUPER, delete,           exec, $hyprutils waybar_refresh
bind = SUPER SHIFT, delete,     exec, $hyprutils hypr_reload
bind = SUPER, l,           exec, $lock

# Fullscreen
bind = SUPER, tab,     fullscreen, 1
bind = SUPER ALT, Tab, fullscreen, 0
bind = SUPER, F11,     fullscreenstate, 0 3

# Print Screen
bind = SUPER,       u, exec, $printScreen
bind = SUPER SHIFT, u, exec, $tesseract

# Floating
bind = SUPER SHIFT, Tab, togglefloating,

# Layouts
bind = SUPER, m, exec, hyprctl keyword general:layout dwindle
bind = SUPER ALT, m, exec, hyprctl keyword general:layout dwindle

# Clipboard History (Rofi)
bind = MOD3, v, exec, $hyprutils clipboard_history

# Dark Mode
bind = SUPER, n, exec, $hyprutils toggle_theme
bind = SUPER, semicolon, exec, swaync-client -t -sw

# ===================================================================
#                        WASD COMMANDS
# ===================================================================
# Focus movement (SUPER + WASD)
binde = SUPER, a, movefocus, l
binde = SUPER, d, movefocus, r
binde = SUPER, w, movefocus, u
binde = SUPER, s, movefocus, d

# Window movement within workspace (SUPER + SHIFT + WASD)
binde = SUPER SHIFT, a, movewindow, l
binde = SUPER SHIFT, d, movewindow, r
binde = SUPER SHIFT, w, movewindow, u
binde = SUPER SHIFT, s, movewindow, d

# Resize workspace (SUPER + ALT + WASD)
binde = SUPER ALT, a, resizeactive, -20 0
binde = SUPER ALT, d, resizeactive, 20 0
binde = SUPER ALT, w, resizeactive, 0 -20
binde = SUPER ALT, s, resizeactive, 0 20

# ===================================================================
#                        ARROWS COMMANDS (ergonomics)
# ===================================================================

# Focus movement (SUPER + ARROWS)
binde = SUPER, left,  movefocus, l
binde = SUPER, right, movefocus, r
binde = SUPER, up,    movefocus, u
binde = SUPER, down,  movefocus, d

# Window movement within workspace (SUPER + SHIFT + ARROWS)
binde = SUPER SHIFT, left,  movewindow, l
binde = SUPER SHIFT, right, movewindow, r
binde = SUPER SHIFT, up,    movewindow, u
binde = SUPER SHIFT, down,  movewindow, d

# Resize workspace (SUPER + CTRL + ARROWS)
binde = SUPER CTRL, left,  resizeactive, -20 0
binde = SUPER CTRL, right, resizeactive, 20 0
binde = SUPER CTRL, up,    resizeactive, 0 -20
binde = SUPER CTRL, down,  resizeactive, 0 20

# ===================================================================
#                        WINDOW MANAGEMENT
# ===================================================================

# Always escape the special workspaces every workspace switch
bind = SUPER, 1, exec, $hyprutils workspace_switch 1
bind = SUPER, 2, exec, $hyprutils workspace_switch 2
bind = SUPER, 3, exec, $hyprutils workspace_switch 3
bind = SUPER, 4, exec, $hyprutils workspace_switch 4
bind = SUPER, 5, exec, $hyprutils workspace_switch 5
bind = SUPER, 6, exec, $hyprutils workspace_switch 6
bind = SUPER, 7, exec, $hyprutils workspace_switch 7
bind = SUPER, 8, exec, $hyprutils workspace_switch 8
bind = SUPER, 9, exec, $hyprutils workspace_switch 9
bind = SUPER, 0, exec, $hyprutils workspace_switch 10

# Move windows to workspaces (SUPER + SHIFT + 1-0) silently
bind = SUPER SHIFT, 1, movetoworkspacesilent, 1
bind = SUPER SHIFT, 2, movetoworkspacesilent, 2
bind = SUPER SHIFT, 3, movetoworkspacesilent, 3
bind = SUPER SHIFT, 4, movetoworkspacesilent, 4
bind = SUPER SHIFT, 5, movetoworkspacesilent, 5
bind = SUPER SHIFT, 6, movetoworkspacesilent, 6
bind = SUPER SHIFT, 7, movetoworkspacesilent, 7
bind = SUPER SHIFT, 8, movetoworkspacesilent, 8
bind = SUPER SHIFT, 9, movetoworkspacesilent, 9
bind = SUPER SHIFT, 0, movetoworkspacesilent, 10

# ===================================================================
#                        MOUSE MANAGEMENT
# ===================================================================
bindm = SUPER, mouse:272, movewindow      # LMB
bindm = SUPER, mouse:273, resizewindow    # RMB

# ===================================================================
#                        MOUSE ZOOM
# ===================================================================
bind = MOD3, mouse:272, exec, hyprctl keyword cursor:zoom_factor $(hyprctl -j getoption cursor:zoom_factor | jq -r '.float * (2 | sqrt)')
bind = MOD3, mouse:273, exec, hyprctl keyword cursor:zoom_factor $(hyprctl -j getoption cursor:zoom_factor | jq -r '[.float / (2 | sqrt), 1] | max')
bind = MOD3aa, mouse:274, exec, hyprctl keyword cursor:zoom_factor 1 # Reset zooms

# ===================================================================
#                      MULTIMEDIA SETTINGS
# ===================================================================

# Audio controls
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 5%-
bind  = , XF86AudioMute,        exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind  = , XF86AudioMicMute,     exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind  = , XF86AudioPlay,        exec, playerctl play-pause
bind  = , XF86AudioPause,       exec, playerctl play-pause
bind  = , XF86AudioNext,        exec, playerctl next
bind  = , XF86AudioPrev,        exec, playerctl previous

# Brightness controls
binde = , XF86MonBrightnessUp,   exec, brightnessctl set 2%+
binde = , XF86MonBrightnessDown, exec, brightnessctl set 2%-
